/**
 * betsol-ng-ui-router-styles - Load custom CSS for different routes
 * @version v0.2.1
 * @link https://github.com/betsol/ng-ui-router-styles
 * @license MIT
 *
 * @author Slava Fomin II <s.fomin@betsol.ru>
 */
!function(e,t){"use strict";function n(t,n,r,o){o.$broadcast(l+"."+f);var u=[];do u.unshift(t),t=t.parent?n.get(t.parent):null;while(t);var i={};e.forEach(u,function(t){t.data&&t.data.css&&e.extend(i,t.data.css)}),s();var c=[];return e.forEach(i,function(e){c.push(a(e,r))}),r.all(c).then(function(){o.$broadcast(l+"."+d)})}function r(t){"string"==typeof t&&(t=[t]);var n={};return e.forEach(t,function(e,t){if("string"==typeof e)e={url:e};else if("object"==typeof e){if(!e.url)return void i("state style definition must have URL specified");e.id&&(t=e.id)}o(t)&&(t=u()),e.id=t,n[t]=e}),n}function o(e){return Number(e)===e&&e%1===0}function u(){return"@resource~"+v++}function i(e){console.log("betsol-ng-ui-router-styles: "+e)}function a(e,n){var r=n.defer();if(t.loadStylesheet)if(e.url){var o=t.loadStylesheet(e.url,function(){r.resolve()});p.push(o)}else r.resolve();else i("betsol-load-stylesheet module must be loaded"),r.reject();return r.promise}function s(){e.forEach(p,function(e){e.remove()}),p=[]}var c="@loadStyles",l="uiRouterStyles",f="loadingStarted",d="loadingFinished",v=1,p=[],h=null;e.module("betsol.uiRouterStyles",["ui.router"]).config(["$stateProvider","$provide",function(t,o){t.decorator("data",function(e,t){var n=t(e);return"undefined"!=typeof n.css&&(n.css=r(n.css)),n}),t.decorator("resolve",function(e,t){function r(t,r,o){return h&&h.name==e.name?n(e,t,r,o):void 0}r.$inject=["$state","$q","$rootScope"];var o=t?t(e):e.resolve||{};return o[c]=r,o}),o.decorator("$state",["$delegate",function(t){var n=t.transitionTo;return t.transitionTo=function(){var t=2;return arguments[t]=e.extend({reload:!0},arguments[t]),n.apply(n,arguments)},t}])}]).run(["$rootScope",function(e){e.$on("$stateChangeStart",function(e,t){h=t})}]).provider("uiRouterStyles",function(){var e={},t={$get:function(){return e}};return t})}(angular,window);